(function(a){a.fn.ImxInfiniteScroll=function(d,j){var f=a.extend({api_url:"http://api.inventmx.com/v1",site:"actitudfem",repo:"nodes.json",api_key:"3a5877fc16b6fcbf8eedbe55d091938a",append:"body",loading:"http://m.actitudfem.com/img/actitudfem/ajax-loader.gif",recreating_fb:true,recreating_twitter:true,recreating_google:true,text_lenght:100,scroll:0,analitics:true,category_analytics:"IMxInfiniteScroll",action_analytics:"Infinite-Scroll",label_analytics:"Numero-Scroll: ",IMxInit:function(){},IMxEnd:function(){}},d);var g=a.extend({sort:null,type:null,fields:null,limit:5,offset:null,audio:null,tag_ids:null,category_url:null,category_ids:null,programa_url:null,programa_ids:null,tag_url:null,callback:null,columnista_ids:null},j);var c=a(this).attr("id");var i=false;var h="";a(f.append).after("<div class='wrapper-loading'><img src='"+f.loading+"'/></div>");a(f.append+" img").each(function(){a(this).css({"background-image":"url("+f.loading+")"});a(this).addClass("loading")});if(g.offset){offset1=g.offset+g.limit;a("#"+c).attr("offset",offset1)}else{a("#"+c).attr("offset",g.limit)}var b=0;var e={analitics:function(){if(f.analitics){url=window.location.href;label=f.label_analytics+b;_gaq.push(["_trackEvent",f.category_analytics,f.action_analytics,label])}},init:function(){e.load()},load:function(){offset=parseInt(a("#"+c).attr("offset"));g.offset=offset;url=f.api_url+"/"+f.site+"/"+f.repo+"/"+f.api_key+"?callback=?";finaldata={};a.each(g,function(l,k){if(k){finaldata[l]=k}});e.getAjax(url,finaldata)},getAjax:function(l,k){i=true;a.ajax({url:l,data:k,dataType:"json",type:"GET",timeout:100000,contentType:"application/json; charset=utf-8",async:false,success:function(m){if(m.response.status==200){result=m.data;if(m){e.render(result)}else{alert("No hay mas datos")}i=false}else{c=a(block).attr("id");alert("Hubo un error inesperado, intenta nuevamente por favor");i=false}},error:function(o,m,n){alert("Hubo un error inesperado, intenta nuevamente por favor");i=false}})},render:function(k){i=false;b+=1;offset=parseInt(a("#"+c).attr("offset"));offset+=g.limit;a("#"+c).attr("offset",offset);tpl=a("#"+c).html();section=Handlebars.compile(tpl);h=section(k);a(f.append).append(h);a(".wrapper-loading").hide();e.analitics();f.IMxEnd();(f.recreating_fb)?FB.XFBML.parse():"";(f.recreating_twitter)?twttr.widgets.load():"";(f.recreating_google)?gapi.plusone.go():""}};a(window).scroll(function(){if(((parseInt(a(window).scrollTop())+f.scroll)==a(document).height()-a(window).height())&&!i){e.init();f.IMxInit();a(".wrapper-loading").show()}});Handlebars.registerHelper("truncate",function(l){len=f.text_lenght;if(l){if(l.length>len&&l.length>0){var k=l+" ";k=l.substr(0,len);k=l.substr(0,k.lastIndexOf(" "));k=(k.length>0)?k:l.substr(0,len);return new Handlebars.SafeString(k+"...")}return l}});Handlebars.registerHelper("ifC2",function(n,k,m,l){switch(k){case"==":return(n==m)?l.fn(this):l.inverse(this);case"===":return(n===m)?l.fn(this):l.inverse(this);case"<":return(n<m)?l.fn(this):l.inverse(this);case"<=":return(n<=m)?l.fn(this):l.inverse(this);case">":return(n>m)?l.fn(this):l.inverse(this);case">=":return(n>=m)?l.fn(this):l.inverse(this);case"&&":return(n&&m)?l.fn(this):l.inverse(this);case"||":return(n||m)?l.fn(this):l.inverse(this);default:return l.inverse(this)}});Handlebars.registerHelper("ifC3",function(p,l,o,k,n,m){switch(l){case"&&":return(p&&o&&n)?m.fn(this):m.inverse(this);case"||":return(p||o||n)?m.fn(this):m.inverse(this);default:return m.inverse(this)}});Handlebars.registerHelper("ifC4",function(r,m,q,l,p,k,o,n){switch(m){case"&&":return(r&&q&&p&&o)?n.fn(this):n.inverse(this);case"||":return(r||q||p||o)?n.fn(this):n.inverse(this);default:return n.inverse(this)}})}})(jQuery);